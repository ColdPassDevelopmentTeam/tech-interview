# MSA(Microservices Architecture) 개요

> - **Author** :  [조영재(co2plant)](https://github.com/co2plant)
> - **Last Update Date** : 2025-10-21 Tue

## 목차
1. [모놀리스 아키텍처](./Monolith.md)
2. [모듈러 모놀리스 아키텍처](./ModularMonolith.md)
3. [마이크로서비스 아키텍처](./MicroservicesArchitecture.md)
4. [모놀리스 vs 마이크로서비스 비교](#-1.-모놀리스-아키텍처-vs-모듈러-모놀리스-vs-MSA)
5. [무엇을 선택해야 하는가?](#-무엇을-선택해야-하는가?)

## 1. 모놀리스 아키텍처 vs 모듈러 모놀리스 vs MSA



| 특징 | 모놀리스 아키텍처 (Monolithic) | 모듈러 모놀리스(ModularMonolith) | 마이크로서비스 아키텍처 (Microservices) |
| :--- | :--- | :--- | :--- |
| **구조** | 모든 기능이 **단일 실행** 가능한 단위로 묶여 있음 (긴밀하게 결합된 코드베이스) | 모듈로 구성된 단일 코드 베이스 |함께 작동하는 독립적인 경량 애플리케이션의 모음 |
| **배포** | 전체 애플리케이션이 **하나의 단위** 로 배포됨 (변경 사항은 전체 시스템 재배포 요구) | 모듈로 나눠져 있으나, 하나의 단위로 배포됨 | 컨테이너화된 서비스의 독립적인 배포 |
| **확장성** | 단일 인스턴스에 더 많은 리소스를 추가하여 수직적으로 확장 | 단일 애플리케이션 내에서 모듈 수준 확장 | 개별 서비스별로 세밀하고 독립적인 확장 가능 |
| **데이터 관리** | 공유되는 중앙 집중식 단일 데이터베이스 | 공유되는 중앙 집중식 단일 데이터베이스(경우에 따라 논리적 격리 및 캡슐화) | 서비스별 데이터베이스, 독립적인 데이터 관리 |
| **장애 격리** | **단일 장애 지점** 이 전체 시스템을 중단시킬 수 있음 | 여전한 단일 장애 지점, 그러나 캡슐화, 불필요 종속성 제거로 오류 전파를 감소 | 장애를 격리하여 시스템 전체 중단 방지 |
| **기술 선택** | 전체 애플리케이션에 걸쳐 단일 기술 스택에 종속 | 모놀리스와 같이 단일 기술 스택에 종속 | 서비스별로 최적의 기술 스택을 선택할 수 있음 |
| **개발 조직** | 단일 팀 또는 기능별 팀 | 모듈별 전문 팀, 통합된 협업 | 서비스별 독립 팀, 제품 중심 조직 |
| **적합한 상황** | 단순한 애플리케이션, MVP 단계, 소규모 팀 | 복잡한 도메인, 중간 규모 조직, 점진적 개선 | 대규모 분산 시스템, DevOps 성숙 조직, 다양한 기술 요구사항 |


## 2. 무엇을 선택해야 하는가?

성공적인 아키텍처 선택을 위해서는 다음과 같은 핵심 요소들을 신중하게 고려해야 합니다:

| 고려 요소 | 핵심 질문 | 모놀리스 적합 | MSA 적합 |
| :--- | :--- | :--- | :--- |
| **팀 규모 및 구조** | 개발 조직의 크기와 전문성은? | 작은 팀 (10명 이하) | 다수의 전문 팀 (10명 이상) |
| **비즈니스 복잡도** | 도메인의 복잡성과 변화 속도는? | 단순하고 안정적인 도메인 | 복잡하고 빠르게 변화하는 도메인 |
| **확장 요구사항** | 트래픽 패턴과 확장 요구는? | 예측 가능한 트래픽, 낮은 확장성 | 불규칙한 트래픽, 높은 확장성 |
| **배포 빈도** | 얼마나 자주 배포해야 하는가? | 주 단위/월 단위 배포 | 일 단위/시간 단위 배포 |
| **조직 성숙도** | DevOps, 자동화, 모니터링 수준은? | 기초 수준의 CI/CD | 성숙한 DevOps 문화 |

> 예시 : 여러분의 조직이 5인 미만의 스타트업이고 프로젝트가 단순한 CRUD 애플리케이션이라면, 모놀리스 아키텍처가 더 현명한 선택입니다. 하지만 시스템이 성장할 것을 고려해 모듈러 모놀리스 설계 원칙을 적용하면 나중에 MSA로의 전환이 용이해집니다.

---

### 2-1. 비즈니스 요구사항 및 아키텍처 선택의 전략적 결정

1.  **확장성 및 부하 패턴 (Scalability and Load)**:
    - 애플리케이션이 **높거나 예측 불가능한 확장성**을 요구하는 경우, 또는 **높은 트래픽 볼륨**을 처리해야 하는 경우 마이크로서비스가 적합합니다. 
    - MSA는 개별 구성 요소를 독립적으로 확장할 수 있게 하여 리소스 활용을 최적화합니다.
2.  **민첩성 및 시장 출시 시간 (Agility and Time-to-Market)**:
    - 이미 배포된 애플리케이션의 **쉽고 빠른 변경**이 필요하고, **일부 모듈만 변경**해야 하는 경우, 마이크로서비스가 이점을 제공합니다. 
    - MSA는 작은 규모의 팀이 **독립적으로 개발 및 배포**하는 것을 가능하게 합니다.
3.  **기술 다양성 (Technology Diversity)**:
    - 애플리케이션의 각 부분이 **서로 다른 기술 스택**을 사용하여 특정 작업에 최적화되어야 하는 경우, 마이크로서비스 접근 방식이 필요합니다.
4.  **모놀리스 우선 전략 (Monolith First)**:
    - **스타트업**이나 아이디어 검증 단계(MVP)에 있는 프로젝트는 **속도를 우선**하기 위해 모놀리스 아키텍처로 시작하는 것이 더 적절할 수 있습니다.
    - 모놀리스로 시작하여 나중에 복잡성이 증가하고 경계가 명확해지면 마이크로서비스로 전환하는 것이 성공적인 패턴으로 알려져 있습니다.
    - **인용:** "모놀리스를 먼저 구축하고, 모놀리스가 너무 커지면 분해하세요." - 마틴 파울러

5.  **시스템 분할 정의 (Develop a Splitting System)**:
    - 프로젝트 **시작 단계부터 분할 시스템을 개발**하는 것은 미래에 발생할 수 있는 문제를 줄이는 데 도움이 됩니다.
    -  여러 모듈 간의 상호 작용과 프로세스를 정의하여 전체 그림을 명확히 하는 것이 중요합니다.

### 2-2. 성공적인 설계를 위한 핵심 원칙 및 경계 정의

성공적인 아키텍처를 위해 초기에 가장 중요한 것은 **서비스 경계를 올바르게 설정**하는 것입니다. 이는 마이크로서비스로 전환할 때 "분산된 모놀리스(distributed monolith)"가 되는 것을 방지하는 핵심입니다.

1.  **도메인 주도 설계 (Domain-Driven Design, DDD) 적용**:
    - 마이크로서비스는 특히 **DDD(Domain Driven Design)를 사용하여 비즈니스 역량** 중심으로 설계되어야 합니다. 이는 **비즈니스 능력**에 맞춰 서비스를 구성하며, 응집력을 높이고 서비스 간의 종속성을 줄입니다.
    - **경계 컨텍스트 (Bounded Contexts)**를 식별하여, 각 서비스의 책임 영역을 명확히 설정해야 합니다. 이는 경험이 풍부한 아키텍트에게도 초기 단계에서 올바르게 설정하기 어려운 과제입니다.
2.  **단일 책임 원칙 (Single Responsibility Principle, SRP)**:
    - 각 마이크로서비스는 **단 하나의 비즈니스 역량 또는 기능**에 초점을 맞춰 모델링되어야 합니다. 이는 서비스 변경의 이유가 오직 하나여야 함을 의미합니다.
3.  **느슨한 결합 (Loose Coupling) 및 높은 응집력 (High Cohesion)**:
    - 서비스는 **느슨하게 결합**되어야 하며, **함께 변경될 가능성이 높은 기능들**은 동일한 서비스의 일부가 되어야 합니다. 느슨한 결합은 설계 아키텍처가 비즈니스 역량을 캡슐화하도록 보장합니다.
    - **안티패턴 경고:** 서비스 간 동기식 호출 의존성이 많을수록 분산 모놀리스에 가까워집니다.

### 2-3. 기술 및 운영 환경의 사전 고려사항

1.  **적절한 인프라 고려**:
    - 마이크로서비스를 위해 **더 좋고 전용적인 인프라**를 고려하는 것이 가장 좋은 관행 중 하나입니다. 호스팅 플랫폼 설계가 불량하면 다른 모든 개발 기준을 충족하더라도 좋은 결과를 얻을 수 없습니다.
    - MSA의 이점인 신속한 배포 및 장애 격리는 **성숙한 CI/CD 파이프라인**과 **강력한 DevOps 문화**가 전제되어야 합니다.
2.  **데이터 저장소 분리 (Data Storage Separation)**:
    - 각 서비스는 **자체적인 독립적인 데이터 저장소**를 가져야 합니다. 이는 모놀리스 아키텍처와 달리 여러 마이크로서비스가 동일한 데이터베이스를 공유하지 않도록 하며, 서비스의 자율성을 유지하는 데 필수적입니다.
3.  **조직적 효율성 개발 및 자율성 (Organizational Efficiencies and Autonomy)**:
    - 마이크로서비스는 **팀 자율성(Team Autonomy)**을 촉진하며, 각 서비스 팀이 독립적으로 구축 및 배포할 수 있는 자유를 제공합니다.
    - MSA의 성공은 종종 **조직 구조를 비즈니스 역량에 맞춰 재편**하는 것과 관련이 있습니다 (Conway's Law).
4.  **모니터링 및 로깅 계획**:
    - MSA는 복잡성이 높기 때문에, **모니터링과 로깅**은 필수적인 초기 단계 고려사항입니다. 각 서비스는 성능을 추적하고 오류를 감지하기 위한 로깅 및 모니터링 시스템을 갖추어야 합니다.
    - 분산 시스템의 동작을 이해하기 위해 **중앙 집중식 로깅 및 분산 트레이싱** 시스템 구현이 중요합니다.
